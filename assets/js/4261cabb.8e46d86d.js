"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[394],{9469:(N,g,l)=>{l.r(g),l.d(g,{assets:()=>I,contentTitle:()=>T,default:()=>C,frontMatter:()=>y,metadata:()=>w,toc:()=>k});var e=l(5893),m=l(1151),v=l(4866),f=l(5162);const y={},T="@oas-typescript/koa",w={id:"nodejs-server-stubs/adapters/koa",title:"@oas-typescript/koa",description:"This section contains the quick start on how to use @oas-typescript/koa.",source:"@site/docs/nodejs-server-stubs/adapters/00-koa.mdx",sourceDirName:"nodejs-server-stubs/adapters",slug:"/nodejs-server-stubs/adapters/koa",permalink:"/oas-typescript/docs/nodejs-server-stubs/adapters/koa",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/nodejs-server-stubs/adapters/00-koa.mdx",tags:[],version:"current",sidebarPosition:0,frontMatter:{},sidebar:"gettingStartedSidebar",previous:{title:"Usage",permalink:"/oas-typescript/docs/nodejs-server-stubs/concepts"},next:{title:"@oas-typescript/express",permalink:"/oas-typescript/docs/nodejs-server-stubs/adapters/express"}},I={},k=[{value:"Requirements",id:"requirements",level:2},{value:"Installation",id:"installation",level:2},{value:"Usage",id:"usage",level:2},{value:"Create a server file",id:"create-a-server-file",level:2}];function S(x){const t={a:"a",code:"code",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,m.a)(),...x.components};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(t.h1,{id:"oas-typescriptkoa",children:"@oas-typescript/koa"}),`
`,(0,e.jsxs)(t.p,{children:["This section contains the quick start on how to use ",(0,e.jsx)(t.code,{children:"@oas-typescript/koa"}),"."]}),`
`,(0,e.jsx)(t.h2,{id:"requirements",children:"Requirements"}),`
`,(0,e.jsxs)(t.p,{children:["The requirements to use ",(0,e.jsx)(t.code,{children:"@oas-typescript/koa"})," are as the following."]}),`
`,(0,e.jsxs)(t.ul,{children:[`
`,(0,e.jsxs)(t.li,{children:["Node.js installation, along with Working package manager, such as ",(0,e.jsx)(t.code,{children:"npm"})," or ",(0,e.jsx)(t.code,{children:"yarn"}),"."]}),`
`,(0,e.jsxs)(t.li,{children:["OpenAPI 3.0 specification file. If you are still using Swagger 2.0, you might need to ",(0,e.jsx)(t.a,{href:"https://swagger.io/blog/news/whats-new-in-openapi-3-0/",children:"migrate"})," or convert your Swagger 2.0 specification into OpenAPI 3.0."]}),`
`]}),`
`,(0,e.jsx)(t.h2,{id:"installation",children:"Installation"}),`
`,(0,e.jsxs)(t.p,{children:["To install ",(0,e.jsx)(t.code,{children:"@oas-typescript/koa"}),", run the command below."]}),`
`,(0,e.jsxs)(v.Z,{groupId:"package-managers",children:[(0,e.jsx)(f.Z,{value:"npm",label:"npm",default:!0,children:(0,e.jsx)(t.pre,{children:(0,e.jsx)(t.code,{className:"language-bash",children:`npm install -D @oas-typescript/koa
`})})}),(0,e.jsx)(f.Z,{value:"yarn",label:"Yarn",children:(0,e.jsx)(t.pre,{children:(0,e.jsx)(t.code,{className:"language-bash",children:`yarn add -D @oas-typescript/koa
`})})})]}),`
`,(0,e.jsx)(t.h2,{id:"usage",children:"Usage"}),`
`,(0,e.jsx)(t.p,{children:"To use the CLI, use the following command."}),`
`,(0,e.jsxs)(v.Z,{groupId:"package-managers",children:[(0,e.jsx)(f.Z,{value:"npm",label:"npm",default:!0,children:(0,e.jsx)(t.pre,{children:(0,e.jsx)(t.code,{className:"language-bash",children:`npx oas-typescript-koa generate ./path/to/openapi.json --output ./path-to-output-directory
`})})}),(0,e.jsx)(f.Z,{value:"yarn",label:"Yarn",children:(0,e.jsx)(t.pre,{children:(0,e.jsx)(t.code,{className:"language-bash",children:`yarn oas-typescript-koa generate ./path/to/openapi.json --output ./path-to-output-directory
`})})})]}),`
`,(0,e.jsx)(t.p,{children:"The CLI has following options that can be passed as arguments."}),`
`,`
`,(0,e.jsxs)(t.table,{children:[(0,e.jsx)(t.thead,{children:(0,e.jsxs)(t.tr,{children:[(0,e.jsx)(t.th,{children:"Option"}),(0,e.jsx)(t.th,{children:"Description"}),(0,e.jsx)(t.th,{children:"Default value"})]})}),(0,e.jsxs)(t.tbody,{children:[(0,e.jsxs)(t.tr,{children:[(0,e.jsxs)(t.td,{children:[(0,e.jsx)(t.code,{children:"--output"}),", ",(0,e.jsx)(t.code,{children:"-o"})]}),(0,e.jsx)(t.td,{children:"The output directory."}),(0,e.jsx)(t.td,{children:(0,e.jsx)(t.code,{children:"(pwd)/oas-typescript"})})]}),(0,e.jsxs)(t.tr,{children:[(0,e.jsx)(t.td,{children:(0,e.jsx)(t.code,{children:"--app-security-schemes-field"})}),(0,e.jsxs)(t.td,{children:["The security scheme field used in the OpenAPI Specification. Mostly useful when you have custom ",(0,e.jsx)(t.code,{children:"securitySchemes"})," that are not supported by the specification."]}),(0,e.jsx)(t.td,{children:(0,e.jsx)(t.code,{children:"securitySchemes"})})]}),(0,e.jsxs)(t.tr,{children:[(0,e.jsx)(t.td,{children:(0,e.jsx)(t.code,{children:"--app-security-requirements-field"})}),(0,e.jsxs)(t.td,{children:["The custom security requirements field used in the OpenAPI Specification. Mostly useful when you have custom ",(0,e.jsx)(t.code,{children:"security"})," that are not supported by the specification."]}),(0,e.jsx)(t.td,{children:(0,e.jsx)(t.code,{children:"security"})})]}),(0,e.jsxs)(t.tr,{children:[(0,e.jsx)(t.td,{children:(0,e.jsx)(t.code,{children:"--module"})}),(0,e.jsxs)(t.td,{children:["The output module. Available values are ",(0,e.jsx)(t.code,{children:"cjs"})," or ",(0,e.jsx)(t.code,{children:"esm"}),"."]}),(0,e.jsx)(t.td,{children:(0,e.jsx)(t.code,{children:"esm"})})]})]})]}),`
`,`
`,(0,e.jsx)(t.p,{children:"There's that! After running that command, you will have your generated files ready at the output directory."}),`
`,(0,e.jsx)(t.h2,{id:"create-a-server-file",children:"Create a server file"}),`
`,(0,e.jsxs)(t.p,{children:["The CLI does not automatically generate a server file, so you will need you create it yourselves. You could create a file, say, ",(0,e.jsx)(t.code,{children:"server.ts"})," outside of the ",(0,e.jsx)(t.code,{children:"output"})," folder."]}),`
`,(0,e.jsx)(t.pre,{children:(0,e.jsx)(t.code,{className:"language-ts",children:`import Koa from 'koa';
import { generatedRouter } from './static/router.js';
import Router from '@koa/router';

const app = new Koa();

app.use(generatedRouter.routes());
app.use(generatedRouter.allowedMethods());

const commonRouter = new Router();
commonRouter.get('/healthz', (ctx) => {
  ctx.body = { healthy: true };
});
app.use(commonRouter.routes());
app.use(commonRouter.allowedMethods());

app.listen(3000, () => {
  console.info('Server is running on port 3000');
});
`})}),`
`,(0,e.jsxs)(t.p,{children:["So, what we are doing above is, we define the Koa application, in which we use the ",(0,e.jsx)(t.code,{children:"generatedRouter"})," as well as the common router (in the case above we are defining ",(0,e.jsx)(t.code,{children:"/healthz"})," endpoint which is used to indicate if the server is already running)."]})]})}function C(x={}){const{wrapper:t}={...(0,m.a)(),...x.components};return t?(0,e.jsx)(t,{...x,children:(0,e.jsx)(S,{...x})}):S(x)}},5162:(N,g,l)=>{l.d(g,{Z:()=>y});var e=l(7294),m=l(6010);const v={tabItem:"tabItem_Ymn6"};var f=l(5893);function y(T){let{children:w,hidden:I,className:k}=T;return(0,f.jsx)("div",{role:"tabpanel",className:(0,m.Z)(v.tabItem,k),hidden:I,children:w})}},4866:(N,g,l)=>{l.d(g,{Z:()=>z});var e=l(7294),m=l(6010),v=l(2466),f=l(6550),y=l(469),T=l(1980),w=l(7392),I=l(12);function k(n){const{props:s}=n;return!!s&&typeof s=="object"&&"value"in s}function S(n){return e.Children.toArray(n).filter(s=>s!==`
`).map(s=>{if(!s||(0,e.isValidElement)(s)&&k(s))return s;throw new Error(`Docusaurus error: Bad <Tabs> child <${typeof s.type=="string"?s.type:s.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function C(n){return S(n).map(s=>{let{props:{value:a,label:r,attributes:o,default:c}}=s;return{value:a,label:r,attributes:o,default:c}})}function x(n){const s=(0,w.l)(n,(a,r)=>a.value===r.value);if(s.length>0)throw new Error(`Docusaurus error: Duplicate values "${s.map(a=>a.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}function t(n){const{values:s,children:a}=n;return(0,e.useMemo)(()=>{const r=s??C(a);return x(r),r},[s,a])}function V(n){let{value:s,tabValues:a}=n;return a.some(r=>r.value===s)}function M(n){let{defaultValue:s,tabValues:a}=n;if(a.length===0)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(s){if(!V({value:s,tabValues:a}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${s}" but none of its children has the corresponding value. Available values are: ${a.map(o=>o.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return s}const r=a.find(o=>o.default)??a[0];if(!r)throw new Error("Unexpected error: 0 tabValues");return r.value}function P(n){return n?`docusaurus.tab.${n}`:null}function A(n){let{queryString:s=!1,groupId:a}=n;if(typeof s=="string")return s;if(s===!1)return null;if(s===!0&&!a)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return a??null}function L(n){let{queryString:s=!1,groupId:a}=n;const r=(0,f.k6)(),o=A({queryString:s,groupId:a}),c=(0,T._X)(o),i=(0,e.useCallback)(E=>{if(!o)return;const j=new URLSearchParams(r.location.search);j.set(o,E),r.replace({...r.location,search:j.toString()})},[o,r]);return[c,i]}function O(n){let{groupId:s}=n;const a=P(s),[r,o]=(0,I.Nk)(a),c=(0,e.useCallback)(i=>{a&&o.set(i)},[a,o]);return[r,c]}function U(n){const{defaultValue:s,queryString:a=!1,groupId:r}=n,o=t(n),[c,i]=(0,e.useState)(()=>M({defaultValue:s,tabValues:o})),[E,j]=L({queryString:a,groupId:r}),[D,h]=O({groupId:r}),u=(()=>{const d=E??D;return V({value:d,tabValues:o})?d:null})();(0,y.Z)(()=>{u&&i(u)},[u]);const p=(0,e.useCallback)(d=>{if(!V({value:d,tabValues:o}))throw new Error(`Can't select invalid tab value=${d}`);i(d),j(d),h(d)},[j,h,o]);return{selectedValue:c,selectValue:p,tabValues:o}}var Z=l(2389);const R={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var b=l(5893);function K(n){let{className:s,block:a,selectedValue:r,selectValue:o,tabValues:c}=n;const i=[],{blockElementScrollPositionUntilNextRender:E}=(0,v.o5)(),j=h=>{const u=h.currentTarget,p=i.indexOf(u),d=c[p].value;d!==r&&(E(u),o(d))},D=h=>{let u=null;switch(h.key){case"Enter":{j(h);break}case"ArrowRight":{const p=i.indexOf(h.currentTarget)+1;u=i[p]??i[0];break}case"ArrowLeft":{const p=i.indexOf(h.currentTarget)-1;u=i[p]??i[i.length-1];break}default:break}u?.focus()};return(0,b.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,m.Z)("tabs",{"tabs--block":a},s),children:c.map(h=>{let{value:u,label:p,attributes:d}=h;return(0,b.jsx)("li",{role:"tab",tabIndex:r===u?0:-1,"aria-selected":r===u,ref:W=>i.push(W),onKeyDown:D,onClick:j,...d,className:(0,m.Z)("tabs__item",R.tabItem,d?.className,{"tabs__item--active":r===u}),children:p??u},u)})})}function B(n){let{lazy:s,children:a,selectedValue:r}=n;const o=(Array.isArray(a)?a:[a]).filter(Boolean);if(s){const c=o.find(i=>i.props.value===r);return c?(0,e.cloneElement)(c,{className:"margin-top--md"}):null}return(0,b.jsx)("div",{className:"margin-top--md",children:o.map((c,i)=>(0,e.cloneElement)(c,{key:i,hidden:c.props.value!==r}))})}function $(n){const s=U(n);return(0,b.jsxs)("div",{className:(0,m.Z)("tabs-container",R.tabList),children:[(0,b.jsx)(K,{...n,...s}),(0,b.jsx)(B,{...n,...s})]})}function z(n){const s=(0,Z.Z)();return(0,b.jsx)($,{...n,children:S(n.children)},String(s))}}}]);
